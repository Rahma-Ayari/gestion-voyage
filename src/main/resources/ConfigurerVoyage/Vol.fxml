<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="800" prefWidth="1400"
            style="-fx-background-color: #F4F6F9;"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controller.ConfigurerVoyage.VolController">

    <!-- â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â• -->
    <top>
        <VBox spacing="0">
            <HBox alignment="CENTER_LEFT" spacing="15"
                  style="-fx-background-color: linear-gradient(to right, #FF6B35, #F7931E); -fx-padding: 18 40;">
                <StackPane prefWidth="48" prefHeight="48"
                           style="-fx-background-color: rgba(255,255,255,0.22); -fx-background-radius: 12;">
                    <Label text="ðŸ§³" style="-fx-font-size: 22px;"/>
                </StackPane>
                <VBox HBox.hgrow="ALWAYS" spacing="1">
                    <Label text="TripEase"
                           style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <Label text="Planifiez votre voyage idÃ©al"
                           style="-fx-font-size: 12px; -fx-text-fill: rgba(255,255,255,0.85);"/>
                </VBox>
                <Label text="âœˆ Nouveau voyage"
                       style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-padding: 7 16; -fx-text-fill: white;
                              -fx-background-color: rgba(255,255,255,0.22); -fx-background-radius: 18;
                              -fx-border-color: rgba(255,255,255,0.45); -fx-border-width: 1.5; -fx-border-radius: 18;"/>
                <Label text="ðŸ‘¤ Utilisateur"
                       style="-fx-font-size: 12px; -fx-padding: 7 14; -fx-text-fill: white;
                              -fx-background-color: rgba(255,255,255,0.15); -fx-background-radius: 18;"/>
            </HBox>
            <!-- Breadcrumb -->
            <HBox alignment="CENTER_LEFT" spacing="6"
                  style="-fx-background-color: white; -fx-padding: 10 40;
                         -fx-border-color: #E8E8E8; -fx-border-width: 0 0 1 0;">
                <Label text="ðŸ  Accueil" style="-fx-font-size: 12px; -fx-text-fill: #999;"/>
                <Label text="â€º" style="-fx-text-fill: #CCC;"/>
                <Label text="Configuration" style="-fx-font-size: 12px; -fx-text-fill: #999;"/>
                <Label text="â€º" style="-fx-text-fill: #CCC;"/>
                <Label text="âœˆ Choisir un Vol"
                       style="-fx-font-size: 12px; -fx-text-fill: #FF6B35; -fx-font-weight: bold;"/>
            </HBox>
        </VBox>
    </top>

    <!-- â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â• -->
    <left>
        <VBox prefWidth="255" spacing="0"
              style="-fx-background-color: white; -fx-border-color: #EBEBEB; -fx-border-width: 0 1 0 0;">

            <Label text="NAVIGATION"
                   style="-fx-text-fill: #C0C0C0; -fx-font-size: 10px; -fx-font-weight: bold; -fx-padding: 20 18 6 18;"/>
            <Button maxWidth="Infinity" text="ðŸ    Accueil"
                    style="-fx-background-color: transparent; -fx-text-fill: #777; -fx-font-size: 13px;
                           -fx-alignment: CENTER-LEFT; -fx-padding: 12 18; -fx-cursor: hand;"/>
            <Button maxWidth="Infinity" text="âœˆ   Configuration du voyage"
                    style="-fx-background-color: linear-gradient(to right,#FFF3E0,#FFF8F4);
                           -fx-text-fill: #FF6B35; -fx-font-weight: bold; -fx-font-size: 13px;
                           -fx-alignment: CENTER-LEFT; -fx-padding: 12 18;
                           -fx-border-color: #FF6B35; -fx-border-width: 0 0 0 3;"/>
            <Button maxWidth="Infinity" text="ðŸ“‹   AperÃ§u du voyage"
                    style="-fx-background-color: transparent; -fx-text-fill: #777; -fx-font-size: 13px;
                           -fx-alignment: CENTER-LEFT; -fx-padding: 12 18; -fx-cursor: hand;"/>

            <Label text="Ã‰TAPES"
                   style="-fx-text-fill: #C0C0C0; -fx-font-size: 10px; -fx-font-weight: bold; -fx-padding: 18 18 6 18;"/>

            <!-- Ã‰tape 1 terminÃ©e -->
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="42" style="-fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: #4CAF50; -fx-background-radius: 13;">
                    <Label text="âœ“" style="-fx-text-fill: white; -fx-font-size: 11px; -fx-font-weight: bold;"/>
                </StackPane>
                <Label text="Dates &amp; Destination" style="-fx-text-fill: #4CAF50; -fx-font-size: 12.5px;"/>
            </HBox>

            <!-- Ã‰tape 2 active -->
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="46"
                  style="-fx-background-color: linear-gradient(to right,#FFF3E0,#FFF8F4);
                         -fx-border-color: #FF6B35; -fx-border-width: 0 0 0 3; -fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: linear-gradient(to bottom,#FF6B35,#F7931E); -fx-background-radius: 13;">
                    <Label text="2" style="-fx-text-fill: white; -fx-font-size: 11px; -fx-font-weight: bold;"/>
                </StackPane>
                <Label text="Vols" style="-fx-text-fill: #FF6B35; -fx-font-weight: bold; -fx-font-size: 12.5px;"/>
            </HBox>

            <!-- Ã‰tapes 3-7 inactives -->
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="42" style="-fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: #E8E8E8; -fx-background-radius: 13;">
                    <Label text="3" style="-fx-text-fill: #AAA; -fx-font-size: 11px;"/>
                </StackPane>
                <Label text="HÃ´tels" style="-fx-text-fill: #BBB; -fx-font-size: 12.5px;"/>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="42" style="-fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: #E8E8E8; -fx-background-radius: 13;">
                    <Label text="4" style="-fx-text-fill: #AAA; -fx-font-size: 11px;"/>
                </StackPane>
                <Label text="ActivitÃ©s" style="-fx-text-fill: #BBB; -fx-font-size: 12.5px;"/>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="42" style="-fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: #E8E8E8; -fx-background-radius: 13;">
                    <Label text="5" style="-fx-text-fill: #AAA; -fx-font-size: 11px;"/>
                </StackPane>
                <Label text="Budget" style="-fx-text-fill: #BBB; -fx-font-size: 12.5px;"/>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="42" style="-fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: #E8E8E8; -fx-background-radius: 13;">
                    <Label text="6" style="-fx-text-fill: #AAA; -fx-font-size: 11px;"/>
                </StackPane>
                <Label text="Services supplÃ©mentaires" style="-fx-text-fill: #BBB; -fx-font-size: 12.5px;"/>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="12" prefHeight="42" style="-fx-padding: 0 18;">
                <StackPane prefWidth="26" prefHeight="26" minWidth="26" minHeight="26"
                           style="-fx-background-color: #E8E8E8; -fx-background-radius: 13;">
                    <Label text="7" style="-fx-text-fill: #AAA; -fx-font-size: 11px;"/>
                </StackPane>
                <Label text="CatÃ©gories" style="-fx-text-fill: #BBB; -fx-font-size: 12.5px;"/>
            </HBox>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Progression -->
            <VBox spacing="6"
                  style="-fx-padding: 14 18; -fx-background-color: #FFF3E0;
                         -fx-border-color: #EBEBEB; -fx-border-width: 1 0 0 0;">
                <HBox>
                    <Label text="Progression"
                           style="-fx-text-fill: #FF6B35; -fx-font-size: 11px; -fx-font-weight: bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="2 / 7"
                           style="-fx-text-fill: #FF6B35; -fx-font-size: 11px; -fx-font-weight: bold;"/>
                </HBox>
                <StackPane prefHeight="6"
                           style="-fx-background-color: #E8E8E8; -fx-background-radius: 3;">
                    <HBox alignment="CENTER_LEFT">
                        <Region prefWidth="73" prefHeight="6"
                                style="-fx-background-color: linear-gradient(to right,#FF6B35,#F7931E);
                                       -fx-background-radius: 3;"/>
                    </HBox>
                </StackPane>
            </VBox>
            <Separator/>
            <Button maxWidth="Infinity" text="âš™   ParamÃ¨tres"
                    style="-fx-background-color: transparent; -fx-text-fill: #777; -fx-font-size: 13px;
                           -fx-alignment: CENTER-LEFT; -fx-padding: 11 18; -fx-cursor: hand;"/>
            <Button maxWidth="Infinity" text="ðŸšª   DÃ©connexion"
                    style="-fx-background-color: transparent; -fx-text-fill: #E74C3C; -fx-font-size: 13px;
                           -fx-alignment: CENTER-LEFT; -fx-padding: 11 18; -fx-cursor: hand;"/>
        </VBox>
    </left>

    <!-- â•â•â•â•â•â•â•â•â•â• CONTENU PRINCIPAL â•â•â•â•â•â•â•â•â•â• -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER"
                    style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="0">

                <!-- Titre + badge vol sÃ©lectionnÃ© -->
                <HBox alignment="CENTER_LEFT" spacing="14" style="-fx-padding: 24 32 14 32;">
                    <StackPane prefWidth="46" prefHeight="46"
                               style="-fx-background-color: linear-gradient(to bottom right,#FF6B35,#F7931E);
                                      -fx-background-radius: 13;">
                        <Label text="âœˆ" style="-fx-font-size: 20px;"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label text="Choisissez votre vol"
                               style="-fx-font-size: 21px; -fx-font-weight: bold; -fx-text-fill: #2C2C2C;"/>
                        <Label text="SÃ©lectionnez le type de vol et les dates souhaitÃ©s"
                               style="-fx-font-size: 13px; -fx-text-fill: #999;"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <VBox alignment="CENTER"
                          style="-fx-background-color: white; -fx-background-radius: 12;
                                 -fx-border-color: #ECECEC; -fx-border-radius: 12; -fx-border-width: 1;
                                 -fx-padding: 10 20;
                                 -fx-effect: dropshadow(gaussian,rgba(0,0,0,0.07),8,0,0,2);">
                        <Label fx:id="selectedVolLabel" text="Aucun vol sÃ©lectionnÃ©"
                               style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-text-fill: #AAA;"/>
                    </VBox>
                </HBox>

                <!-- â•â• PANNEAU FILTRES â•â• -->
                <VBox spacing="14"
                      style="-fx-background-color: white;
                             -fx-border-color: #F0F0F0; -fx-border-width: 1 0 1 0;
                             -fx-padding: 18 32;">

                    <!-- Ligne 1 : Type de vol -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Type de vol :"
                               style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        <ToggleButton fx:id="btnAllerRetour" text="â‡„  Aller-Retour" prefHeight="34"
                                      style="-fx-background-radius: 8; -fx-font-size: 13px; -fx-cursor: hand;
                                             -fx-border-radius: 8; -fx-border-width: 1.5;"/>
                        <ToggleButton fx:id="btnAllerSimple" text="â†’  Aller simple" prefHeight="34"
                                      style="-fx-background-radius: 8; -fx-font-size: 13px; -fx-cursor: hand;
                                             -fx-border-radius: 8; -fx-border-width: 1.5;"/>
                        <ToggleButton fx:id="btnRetourSimple" text="â†  Retour simple" prefHeight="34"
                                      style="-fx-background-radius: 8; -fx-font-size: 13px; -fx-cursor: hand;
                                             -fx-border-radius: 8; -fx-border-width: 1.5;"/>
                    </HBox>

                    <!-- Ligne 2 : DatePickers + bouton rechercher -->
                    <HBox spacing="16" alignment="CENTER_LEFT">

                        <!-- Date d'aller (VBox avec fx:id pour masquer/afficher) -->
                        <VBox fx:id="vboxDateAller" spacing="5">
                            <Label text="ðŸ“… Date d'aller"
                                   style="-fx-font-size: 12px; -fx-text-fill: #777; -fx-font-weight: bold;"/>
                            <DatePicker fx:id="dateAllerPicker" prefWidth="170" prefHeight="34"/>
                        </VBox>

                        <!-- Date de retour (VBox avec fx:id pour masquer/afficher) -->
                        <VBox fx:id="vboxDateRetour" spacing="5">
                            <Label text="ðŸ“… Date de retour"
                                   style="-fx-font-size: 12px; -fx-text-fill: #777; -fx-font-weight: bold;"/>
                            <DatePicker fx:id="dateRetourPicker" prefWidth="170" prefHeight="34"/>
                        </VBox>

                        <!-- Bouton rechercher -->
                        <VBox alignment="BOTTOM_LEFT" spacing="5">
                            <!-- label vide pour aligner verticalement avec les autres VBox -->
                            <Label text=" " style="-fx-font-size: 12px;"/>
                            <Button text="ðŸ”  Rechercher les vols"
                                    onAction="#onRechercherVols"
                                    prefHeight="34"
                                    style="-fx-background-color: linear-gradient(to right,#FF6B35,#F7931E);
                                           -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13px;
                                           -fx-background-radius: 8; -fx-cursor: hand;
                                           -fx-effect: dropshadow(gaussian,rgba(255,107,53,0.35),8,0,0,2);"/>
                        </VBox>
                    </HBox>
                </VBox>

                <!-- Bandeau destination + compteur -->
                <HBox alignment="CENTER_LEFT"
                      style="-fx-background-color: #FAFAFA;
                             -fx-border-color: #F0F0F0; -fx-border-width: 0 0 1 0;
                             -fx-padding: 12 32;">
                    <StackPane prefWidth="34" prefHeight="34" minWidth="34"
                               style="-fx-background-color: #E8F5E9; -fx-background-radius: 9;">
                        <Label text="ðŸ“" style="-fx-font-size: 14px;"/>
                    </StackPane>
                    <VBox spacing="2" style="-fx-padding: 0 0 0 12;">
                        <Label fx:id="headerDestLabel" text="Chargement..."
                               style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                        <Label fx:id="nbVolsLabel" text=""
                               style="-fx-font-size: 12px; -fx-text-fill: #4CAF50; -fx-font-weight: bold;"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="â„¹  Cliquez sur une carte pour sÃ©lectionner votre vol"
                           style="-fx-font-size: 12px; -fx-text-fill: #1565C0;
                                  -fx-background-color: #E8F4FD; -fx-background-radius: 8;
                                  -fx-padding: 6 14;"/>
                </HBox>

                <!-- Liste des cartes vols -->
                <VBox style="-fx-padding: 20 32 0 32;">
                    <VBox fx:id="volsContainer" spacing="14"/>
                </VBox>

                <!-- Ã‰tat vide -->
                <VBox fx:id="emptyState" alignment="CENTER" spacing="14"
                      style="-fx-padding: 60 32;">
                    <StackPane prefWidth="80" prefHeight="80"
                               style="-fx-background-color: #F5F5F5; -fx-background-radius: 40;">
                        <Label text="âœˆ" style="-fx-font-size: 36px; -fx-opacity: 0.25;"/>
                    </StackPane>
                    <Label text="Aucun vol disponible"
                           style="-fx-font-size: 17px; -fx-font-weight: bold; -fx-text-fill: #CCC;"/>
                    <Label text="Il n'existe aucun vol pour cette destination et ces dates."
                           style="-fx-font-size: 13px; -fx-text-fill: #DDD;"/>
                    <Label text="Essayez de modifier vos dates ou votre destination."
                           style="-fx-font-size: 12px; -fx-text-fill: #E0E0E0;"/>
                </VBox>

                <!-- Boutons navigation -->
                <HBox spacing="14" alignment="CENTER_RIGHT" style="-fx-padding: 28 32 32 32;">
                    <Button onAction="#retourEtapePrecedente" prefHeight="44" prefWidth="150"
                            text="â† PrÃ©cÃ©dent"
                            style="-fx-background-color: white; -fx-text-fill: #666;
                                   -fx-font-size: 13px; -fx-font-weight: bold;
                                   -fx-background-radius: 10; -fx-border-color: #DCDCDC;
                                   -fx-border-radius: 10; -fx-border-width: 1.5; -fx-cursor: hand;"/>
                    <Button fx:id="suivantBtn" onAction="#passerEtapeSuivante"
                            prefHeight="44" prefWidth="200"
                            text="Confirmer ce vol  â†’"
                            style="-fx-background-color: linear-gradient(to right,#FF6B35,#F7931E);
                                   -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;
                                   -fx-background-radius: 10; -fx-cursor: hand;
                                   -fx-effect: dropshadow(gaussian,rgba(255,107,53,0.4),10,0,0,3);"/>
                </HBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
